<!DOCTYPE html>
<html lang="zh-HK">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Lucky Draw Â· CMS (Firebase-only)</title>
  <link rel="stylesheet" href="./styles.css" />
  <link rel="icon" href="data:,">
  <style>.chip{display:inline-block;padding:4px 8px;border:1px solid #fff33a33;border-radius:999px;margin:2px}</style>
</head>
<body>
  <div id="loginGate" class="overlay" style="display:none">
    <form id="loginForm" class="card" style="min-width:320px; background:#121a2b; padding:16px">
      <h3 style="margin-top:0">ç™»å…¥</h3>
      <label>å¸³è™Ÿ <input id="loginUser" placeholder="admin" /></label>
      <label>å¯†ç¢¼ <input id="loginPass" type="password" placeholder="admin" /></label>
      <div class="bar" style="margin-top:12px">
        <button id="btnLogin" class="btn primary" type="submit">ç™»å…¥</button>
      </div>
    </form>
  </div>

  <header>
    <div class="container row">
      <div class="tabs"><button class="btn primary active" type="button">å¾Œå° CMS</button></div>
      <div class="bar" style="margin-left:auto">
        <a class="btn" href="./public.html" target="_blank" role="button">Public Board â†—</a>
        <a class="btn" href="./tablet.html" target="_blank" role="button">Tablet View â†—</a>
        <a class="btn primary" href="./landing.html" target="_blank" role="button">Landing â†—</a>
      </div>
    </div>
  </header>

  <main class="container" id="cmsView">
    <div class="cms-grid">
      <aside class="sidebar">
        <div class="sidebar-title">æ´»å‹•æ¸…å–®</div>
        <div id="eventList" class="event-list"></div>
        <hr style="border-color:rgba(255,255,255,.12)">
        <div class="sidebar-title">åŠŸèƒ½é é¢</div>
        <nav id="cmsNav" class="nav-list">
          <button class="nav-item active" data-target="pageEvent">æ´»å‹•è³‡æ–™</button>
          <button class="nav-item" data-target="pageRoster">åå–®</button>
          <button class="nav-item" data-target="pagePrizes">çå“ / æŠ½ç</button>
          <button class="nav-item" data-target="pagePoll">æŠ•ç¥¨</button>
        </nav>
      </aside>

      <section class="cms-main">
        <section class="card subpage" id="pageEvent">
          <h3>æ´»å‹•è³‡æ–™</h3>
          <div class="grid-2">
            <label>æ´»å‹•åç¨± <input id="evTitle" /></label>
            <label>å®¢æˆ¶åç¨± <input id="evClient" /></label>
            <label>æ—¥æœŸæ™‚é–“ <input id="evDateTime" /></label>
            <label>åœ°é»åç¨± <input id="evVenue" /></label>
            <label>åœ°å€ <input id="evAddress" /></label>
            <label>Google åœ°åœ–é€£çµ <input id="evMapUrl" /></label>
            <label>å·´å£« <textarea id="evBus" rows="3"></textarea></label>
            <label>åœ°éµ/ç«è»Š <textarea id="evTrain" rows="3"></textarea></label>
            <label>æ³Šè»Š <textarea id="evParking" rows="3"></textarea></label>
            <label>å‚™è¨» <textarea id="evNotes" rows="3"></textarea></label>
            <button id="saveEventInfo" class="btn primary" type="button">ğŸ’¾ å„²å­˜</button>
          </div>
        </section>

        <section class="card subpage" id="pageRoster" style="display:none">
          <h3>åå–® / åŒ¯å…¥</h3>
          <input type="file" id="csvFile" accept=".csv" />
          <div class="bar" style="margin-top:8px">
            <button id="btnImportCSV" class="btn">åŒ¯å…¥ CSV</button>
            <button id="btnExportCSV" class="btn">åŒ¯å‡º CSV</button>
          </div>
          <div id="guestList" style="margin-top:10px"></div>
        </section>

        <section class="card subpage" id="pagePrizes" style="display:none">
          <h3>çå“ / æŠ½ç</h3>
          <div class="bar" style="margin-bottom:8px">
            <input id="newPrizeName" placeholder="çå“åç¨±" />
            <label>åé¡ <input type="number" id="newPrizeQuota" value="1" min="1" /></label>
            <button id="addPrize" class="btn" type="button">+ æ–°å¢</button>
          </div>
          <table>
            <thead><tr><th>ä½¿ç”¨ä¸­</th><th>çå“åç¨±</th><th>åé¡</th><th>å·²å¾—ç</th></tr></thead>
            <tbody id="prizeRows"></tbody>
          </table>
          <div class="bar">
            <label>æ‰¹é‡ <input id="batchCount" type="number" value="1" min="1" /></label>
            <button id="drawBatch" class="btn">æŠ½å‡º</button>
          </div>
        </section>

        <section class="card subpage" id="pagePoll" style="display:none">
          <h3>æŠ•ç¥¨</h3>
          <p>ï¼ˆä½¿ç”¨ vote.html?event=&poll= ï¼‰</p>
        </section>
      </section>
    </div>
  </main>

  <script src="./qrcode.min.js"></script>
  <script type="module">
    import { bootCMS } from './src/ui_cms_firebase.js';
    document.addEventListener('DOMContentLoaded', bootCMS);
  </script>
</body>
</html>
