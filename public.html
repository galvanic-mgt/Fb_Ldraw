<!doctype html>
<html lang="zh-HK">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1, viewport-fit=cover" />
  <title>公眾畫面 · 舞台抽獎</title>

  <!-- ✅ Use the same stylesheet as CMS -->
  <link rel="stylesheet" href="./styles.css">

<style>
  /* Full-viewport centering for public view */
  html, body { height: 100%; margin: 0; background: #0b0d12; }

  /* Isolation wrapper: center content, ignore CMS page layout */
  .is-public #publicRoot {
    position: fixed; inset: 0;
    display: grid; place-items: center;
    padding: 0; margin: 0;
  }

  /* Make the stage fill the screen proportionally */
  .is-public #cmsStage16x9 {
    width: 100vw;
    height: 100vh;
    display: flex;
    flex-direction: column;
    justify-content: flex-start;   /* stack from the top, no big gaps */
    align-items: stretch;
    box-sizing: border-box;
    padding: 16px 32px;
    gap: 48px;                     /* controlled space between rows */
  }


  /* Nuke typical CMS layout constraints that cause left-hug */
  .is-public .card,
  .is-public .subpage,
  .is-public .wrap,
  .is-public .container {
    width: auto; max-width: none; margin: 0; padding: 0;
  }

  /* Ensure rows expand to full width under any inherited rules */
  .is-public .stage-row { width: 100%; margin: 0; }

  /* Make 現正抽獎 bigger on public board */
.is-public .current-prize{
  font-size: clamp(24px, 3vw, 100px);
  
}

/* Optionally also bump the 此獎尚餘 pill a bit */
.is-public #prizeLeftInline.stat{
  font-size: clamp(18px, 1vw, 32px);
  padding: 10px 16px;
}
/* PUBLIC VIEW: compress the 現正抽獎 row */
.is-public .prize-strip {
    flex: 0 0 auto !important;       /* do NOT stretch vertically */
    height: auto;
    padding: 0;
    margin: 0;
}

/* reduce vertical padding inside the bar */
.is-public .prize-strip .bar {
    padding: 4px 24px !important;    /* was like 12px–20px */
    height: auto;
}

/* remove the giant top/bottom spacers */
.is-public .prize-strip .spacer {
    flex: 0 0 auto !important; 
    height: 0 !important;            /* stops them from pushing content down */
}
/* PUBLIC VIEW — Logo */
.is-public #stageLogo {
    width: 300px;        /* adjust this */
    height: 300px;        /* adjust this */
    background-size: contain;
    background-repeat: no-repeat;
    background-position: center;
    margin-right: 24px;
    margin-left: 32px;
    background-size: contain;   /* ⬅️ key line */
    overflow: hidden;           /* keep it inside rounded corners */
    background-size: cover; 
}

/* PUBLIC VIEW — Banner */
.is-public #stageBanner {
    height: 200px;        /* adjust this */
    background-size: contain;
    background-repeat: no-repeat;
    background-position: center;
    border-radius: 0px;
    background-size: contain;   /* ⬅️ key line */
    overflow: hidden;           /* keep it inside rounded corners */
}

/* Public header row container (optional tidy-up) */
.is-public .header-row {
    display: flex;
    align-items: center;
    gap: 24px;
}

.is-public .winners-area.stage-main {
  flex: 1 1 auto;          /* ⬅️ grow to fill leftover space */
  display: flex;
  flex-direction: column;
  min-height: 0;           /* important for flex children to be able to shrink */
}
/* PUBLIC: make the winners grid fill the winners area */
/* PUBLIC: let styles.css control layout; only flex-size the container */
.is-public #stageGrid {
  flex: 1 1 auto;
  min-height: 0;
}


/* keep countdown below the grid */
.is-public #stageCountdown {
  margin-top: 8px;
  flex: 0 0 auto;
}


</style>

</head>
<body class="is-public">
  <div id="publicRoot">
    
    <div id="cmsStage16x9" class="cms-stage">
      <div class="stage-row header">
        <div id="stageLogo" class="logo-box">LOGO</div>
        <div id="stageBanner" class="banner-box">Banner space</div>
      </div>

      <div class="stage-row prize-strip">
        <div class="spacer"></div>
        <div class="bar">
          <div id="stageCurrentPrize" class="stat current-prize">
            現正抽獎：<span id="stagePrizeName">—</span>
          </div>
          <div id="prizeLeftInline" class="stat">
            此獎尚餘：<span id="stagePrizeLeft">—</span>
          </div>
        </div>
        <div class="spacer"></div>
      </div>

      <div class="stage-row winners-area stage-main">
        <div id="stageGrid"></div>
        <div id="stageCountdown"></div>
      </div>
      
    </div>
  </div>
  <script src="https://cdn.jsdelivr.net/npm/canvas-confetti@1.9.3/dist/confetti.browser.min.js"></script>

  <!-- These must come *before* our boot script so renderStageDraw exists -->
  <script type="module" src="./src/core_firebase.js"></script>
  <script type="module" src="./src/stage_prizes_firebase.js"></script>

  <!-- ✅ Then our boot script that calls renderStageDraw() -->
  <script type="module" src="./src/public_stage_boot.js"></script>
  <script type="module" src="./src/public_stage_state.js"></script>

</body>
</html>
